<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stylized Result - Stylique</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
   <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&display=swap" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"> <!-- Link shared CSS -->
   <style>
    /* Specific styles for result page */
    body {
      background-color: #e9e9e9; /* Slightly different background */
      padding-top: 60px; /* Space for potential fixed navbar */
      padding-bottom: 60px;
    }
    .container { max-width: 1600px; } /* Wider container for 4 images */
    .img-fluid {
        max-width: 100%;
        height: auto;
        border-radius: 8px;
        box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        margin-bottom: 15px;
        border: 1px solid #ddd;
        background-color: #fff; /* White background for images */
        padding: 5px; /* Small padding around image */
    }
    .card {
        background-color: #ffffff;
        border: none; /* Remove default border */
        border-radius: 10px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.08);
    }
    .card h4 {
        color: #003f63;
        margin-bottom: 20px;
        font-weight: 700;
        border-bottom: 2px solid #eee;
        padding-bottom: 10px;
    }
    .card p { margin-bottom: 8px; font-size: 0.98rem; }
    .card strong { color: #333; margin-right: 5px; }
    .section-title {
        color: #002a42; /* Darker title */
        margin-bottom: 40px;
        font-weight: 800;
        text-align: center;
        font-family: 'Cinzel', serif; /* Use Cinzel for title */
        font-size: 2.5rem;
    }
    .image-grid .col-md-6, .image-grid .col-lg-3 { /* Responsive columns */
        text-align: center;
        margin-bottom: 30px;
    }
    .image-grid h5 { /* Image titles */
        font-weight: 600;
        color: #555;
        margin-top: 5px;
        margin-bottom: 20px;
        font-size: 1.1rem;
    }
     hr {
         margin-top: 50px;
         margin-bottom: 50px;
         border-top: 1px solid #ccc;
     }
     .alert-danger {
         background-color: #f8d7da;
         color: #721c24;
         border-color: #f5c6cb;
         font-weight: 500;
     }
    .btn-primary { /* Use style from style.css if defined, or override here */
        background-color: #003f63;
        border: none;
        padding: 12px 30px;
        font-size: 1.1rem;
        font-weight: 600;
    }
    .btn-primary:hover {
        background-color: #002a42;
    }
    .text-muted { color: #777 !important; }
    .placeholder-img {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 200px; /* Adjust height as needed */
        width: 100%;
        background-color: #eee;
        border: 1px dashed #ccc;
        border-radius: 8px;
        color: #888;
        font-style: italic;
        margin-bottom: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2 class="section-title">Stylization Results</h2>

    {% if error %}
      <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <strong>Error during processing:</strong> {{ error }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endif %}

    <!-- Image Display Row -->
    <div class="row image-grid justify-content-center">
      <!-- Column 1: Content Image -->
      <div class="col-md-6 col-lg-3">
        <h5>Content Image</h5>
        {% if content_image_url %}
          <a href="{{ content_image_url }}" target="_blank"><img src="{{ content_image_url }}" alt="Content Image" class="img-fluid"></a>
        {% else %}
          <div class="placeholder-img">Content Image Unavailable</div>
        {% endif %}
      </div>

      <!-- Column 2: Style Image -->
      <div class="col-md-6 col-lg-3">
        <h5>Style Image Used</h5>
         {% if style_image_url %}
          <a href="{{ style_image_url }}" target="_blank"><img src="{{ style_image_url }}" alt="Style Image" class="img-fluid"></a>
        {% else %}
           <div class="placeholder-img">Style Image Unavailable</div>
        {% endif %}
      </div>

      <!-- Column 3: Teacher Output -->
      <div class="col-md-6 col-lg-3">
         <h5>Teacher Output (VGG)</h5>
        {% if teacher_output_url %}
          <a href="{{ teacher_output_url }}" target="_blank"><img src="{{ teacher_output_url }}" alt="Teacher Model Output" class="img-fluid"></a>
        {% else %}
           <div class="placeholder-img">Teacher Output Unavailable</div>
           {% if teacher_time == "N/A" %}
            <small class="text-muted d-block mt-1">(Processing might have failed)</small>
           {% endif %}
        {% endif %}
      </div>

      <!-- Column 4: Student Output -->
      <div class="col-md-6 col-lg-3">
        <h5>Student Output (CNN)</h5>
        {% if student_output_url %}
          <a href="{{ student_output_url }}" target="_blank"><img src="{{ student_output_url }}" alt="Student Model Output" class="img-fluid"></a>
        {% else %}
           <div class="placeholder-img">Student Output Unavailable</div>
           {% if student_time == "N/A" %}
             <small class="text-muted d-block mt-1">(Model not loaded or error occurred)</small>
          {% endif %}
        {% endif %}
      </div>
    </div><!-- /row image-grid -->

    <hr>

    <!-- Details Row -->
    <div class="row justify-content-center">
      <div class="col-lg-5"> <!-- Adjusted column size -->
        <div class="card">
          <h4>Teacher Model Details</h4>
          <p><strong>Processing Time:</strong> {{ teacher_time }} sec</p>
          <p><strong>Iterations Used:</strong> {{ teacher_iterations }}</p>
          <p><strong>Method:</strong> Optimization (VGG19 Features)</p>
        </div>
      </div>
      <div class="col-lg-5"> <!-- Adjusted column size -->
        <div class="card">
          <h4>Student Model Details</h4>
           <p><strong>Processing Time:</strong> {{ student_time }} sec</p>
           <p><strong>Iterations Used:</strong> {{ student_iterations }}</p>
           <p><strong>Method:</strong> Feed-forward CNN (.keras)</p>
           {% if student_time != "N/A" and student_time|float > 0 %}
             <small class="text-muted d-block mt-2">(Note: Student applies its pre-trained transformation. Iterations > 1 refine the output based on previous step.)</small>
           {% elif student_time == "N/A" %}
             <small class="text-warning d-block mt-2">(Student model might not be loaded or failed.)</small>
           {% endif %}
        </div>
      </div>
    </div> <!-- /row details -->


    <div class="text-center mt-5"> <!-- Increased margin top -->
        <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg">Stylize Another Image</a>
    </div>

  </div><!-- /container -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>